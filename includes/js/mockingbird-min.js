YAHOO.namespace("mockingbird");YAHOO.mockingbird.util=function(){return{assert:function(b,a){if(b===false){throw new Error(a)}},fadeElement:function(b,f,d,g,a,i){var h,c,e=b;if(!YAHOO.lang.isObject(e)){e=YAHOO.util.Dom.get(e);YAHOO.mockingbird.util.assert(!YAHOO.lang.isNull(e)&&!YAHOO.lang.isUndefined(e),"function fadeElement: Unable to identify element to fade!")}YAHOO.mockingbird.util.assert(f==="out"||f==="in","function fadeElement: A valid direction must be given to perfom the fade animation!");if(f==="out"){c={opacity:{from:1,to:0}}}else{if(f==="in"){c={opacity:{from:0,to:1}}}}h=new YAHOO.util.Anim(b,c,d,YAHOO.util.Easing.easeOut);if(YAHOO.lang.isFunction(g)){h.onStart.subscribe(g)}h.onComplete.subscribe(function(){if(!YAHOO.lang.isNull(i)&&i!==false){YAHOO.mockingbird.util.remove(e)}if(YAHOO.lang.isFunction(a)){a()}});h.animate();return e},prettyDate:function(c){var b=c,d=(((new Date()).getTime()-b.getTime())/1000),a=Math.floor(d/86400);if(isNaN(a)||a<0||a>=31){return}return a===0&&(d<60&&"just now"||d<120&&"1 minute ago"||d<3600&&Math.floor(d/60)+" minutes ago"||d<7200&&"1 hour ago"||d<86400&&Math.floor(d/3600)+" hours ago")||a==1&&"Yesterday"||a<7&&a+" days ago"||a<31&&Math.ceil(a/7)+" weeks ago"}}}();YAHOO.util.Event.on(window,"load",function(){var b,a=YAHOO.util.Dom.get("mockingbird-container")||"undefined",e=window.location.href,c={timeout:10000,success:function(f){var h=[];try{h=YAHOO.lang.JSON.parse(f.responseText)}catch(l){}var q="",n,m,k,r=YAHOO.util.Dom.getElementsByClassName("mockingbird-body"),p=r.length;if(YAHOO.lang.isObject(h.results)&&!YAHOO.lang.isUndefined(h.results)){n=h.results.length;for(var j=0;j<n&&j<5;j++){var g=YAHOO.util.Dom.getLastChild("mockingbird-container");YAHOO.mockingbird.util.fadeElement(g,"out",1,null,null,true);k=new Date(h.results[j].created_at);tPrettyDate=YAHOO.mockingbird.util.prettyDate(k);m=h.results[j].text;m=m.replace(/((\w+):\/\/[\S]+\b)/gim,'<a class="mockingbird-link" target="_blank" href="$1" target="_blank">$1</a>');m=m.replace(/@(\w+)/gim,'<a class="mockingbird-link" target="_blank" href="http://twitter.com/$1" target="_blank">@$1</a>');q+='<div class="mockingbird-body" id="tweet-'+h.results[j].id+'"><div class="mockingbird-container-left"><img height="48" width="48" class="mockingbird-profile-image" src="'+h.results[j].profile_image_url+'" alt="'+h.results[j].from_user+'" /></div><div class="mockingbird-container-right"><p class="mockingbird-text" id="'+h.results[j].id+'"><a class="mockingbird-link" target="_blank" href="http://twitter.com/'+encodeURIComponent(h.results[j].from_user)+'">'+h.results[j].from_user+"</a>&nbsp;"+m+'<br><span class="mockingbird-date">'+tPrettyDate+"</span></p></div></div>";a.innerHTML=q}}}};function d(){var i,f="",h=YAHOO.util.Dom.getFirstChild("mockingbird-container")||"undefined";if(!YAHOO.lang.isUndefined(h)&&h!=="undefined"){i=h.id.split("-")[1];if(!YAHOO.lang.isUndefined(i)){f=i}}var g=YAHOO.util.Connect.asyncRequest("GET","includes/mockingbird_proxy.php?page="+encodeURI(e)+"&since_id="+f,c)}d();setInterval(function(){d()},60000)});